#!/usr/bin/env bqn
# Idea: replace "one" to "1ne"

l â† â€¢FLines "input_1a.txt" # load as lines
words â† âŸ¨"one", "two", "three", "four", "five", "six", "seven", "eight", "nine"âŸ©
digits â† '1'+â†•9

# from docs on find, returns indices where ğ•¨ is in ğ•©
Search â† (â‰  âˆ˜ âŠ¢ â†‘ â·) 
Split â† { ğ•¨(âŠ¢-Ëœ+`Ã—Â¬)âŠ¸âŠ”ğ•© } # split ğ•© word at indices indicated by ğ•¨, from bqncrate
Interleave â† { âˆ¾1â†“â¥Šğ•¨â‰Ë˜ğ•© } # insert ğ•¨ between ğ•© cells, from bqncrate
FirstLetterToNumber â† {
    matches â† SearchâŸœğ•©Â¨words
    mut â† ğ•©
    ProcessMatch â† {
        # change mut in place so each word-digit is replaced
        mut â†© (ğ•© âŠ‘ digits) Interleave ((ğ•© âŠ‘ matches) Split mut)
    }
    ProcessMatchâŒœ (âŒ½â†•â‰ digits)
    mut
}
FirstLastDigits â† 0â€¿Â¯1âŠ¸âŠ(âˆŠâŸœ('0'+â†•10))âŠ¸/ # repeats digit if it's single
â€¢Show +Â´(â€¢ParseFloat FirstLastDigitsâˆ˜FirstLetterToNumber)âŒœ l
