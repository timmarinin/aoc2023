l â† â€¢FLines "input_4.txt"
LenGame â† 2 + (âŠ‘âˆ˜/ ": "âŠ¸â·)
DropGameXX â† LenGameâŠ¸â†“
Split â† ((Â¬-ËœâŠ¢Ã—Â·+`Â»âŠ¸>)âˆ˜â‰ âŠ”âŠ¢)
SplitByPipe â† '|'âŠ¸Split # from bqncrate
SplitBySpace â† ' 'âŠ¸Split # from bqncrate
Prepare â† { â€¢ParseFloatÂ¨Â¨ SplitBySpaceÂ¨ SplitByPipe DropGameXX ğ•© }
Score â† { ğ•Š wâ€¿n: 2â‹†-âŸœ1 +Â´(n âˆŠ w) }
Part1 â† { +Â´ âŒŠÂ¨(Scoreâˆ˜Prepare)Â¨ ğ•© }
# â€¢Show Part1 l
# PART B
emptyRegistry â† (â‰ l)â€¿1 â¥Š 0
i â† 0
wâ€¿n â† Prepare âŠ‘ l
UpdateRegistry â† { ğ•Š registryâ€¿iâ€¿wâ€¿n:
    distribute â† +Â´ (n âˆŠ w) # new winning cards count
    copies â† iâ€¿0 âŠ‘ registry
    start â† (i + 1)â€¿1 â¥Š 0
    patch â† distributeâ€¿1 â¥Š copies
    end â† ((â‰ registry) - distribute + (â‰  start))â€¿1 â¥Š 0
    diff â† (start âˆ¾ patch âˆ¾ end)
    registry +Ë˜ diff
}
PrepareI â† { â€¢ParseFloatÂ¨Â¨ SplitBySpaceÂ¨ SplitByPipe DropGameXX ğ•© }

# mutating the registry
registry â† (â‰ l)â€¿1 â¥Š 1

{
    ğ•Š i:
    wâ€¿n â† PrepareI (i âŠ‘ l)
    registry â†© UpdateRegistry registryâ€¿iâ€¿wâ€¿n
}Â¨ â†•â‰ l

partB â† +Â´ â¥Š registry

â€¢Show partB
